{% block post %}
<div class="inbox_block">
    <div class="post_headline">
        <div class="title">
            <h3>{{ item.title }}</h3>
        </div>
        <div class="author">
            <a href="{{ item.author.url }}"> {{ item.author.displayName }}</a>
        </div>
    </div>
    <div class="post_description">
        <h3>{{ item.description }}</h3>
    </div>
    {% if item.contentType == 'text/markdown' %}
        <p>{{ item.content |safe }}</p>
    {% elif item.contentType == 'image/png;base64' %}
        <img class="post_image" src="{{ item.content }}"/>
    {% elif item.contentType == 'image/jpeg;base64' %}
        <img class="post_image" src="{{ item.content }}"/>
    {% else %}
        <p>{{item.content}}</p>
    {% endif %}
    <div class="action_box">
        <!--repost-->
        <div>
            <form action={{"repost_submit/"|add:item.id|add:"/"}} method="post">
                {% csrf_token %}
                <button name="repost" value="repost">Repost</button>
            </form>
        </div>
        <!--edit-->
        <!--delete-->
        <!--like-->
        <!--if image -> embed link-->
        {% if item.contentType == 'image/png;base64' or item.contentType == 'image/jpeg;base64'%}
            <button id="{{item.id}}">Copy Embed Link</button>
            <script>
                var btn = document.getElementById('{{item.id}}');
                btn.onclick = () => {
                    navigator.clipboard.writeText('{{item.source|add:"image/"}}')
                }
            </script>
        {% endif %}
    </div>
    <div class="comment_box">
        <form method="post", action="comment_submit/">
            {% csrf_token %}
            <input type="text" name="comment" placeholder="enter your comment here">
            <input type="hidden" name="endpoint" value="{{ item.comments }}">
            <button type="submit">Comment</button>
        </form>
        {% for comment in item.commentsSrc.comments %}
        <div class="comment">
            <a href="{{ comment.author.url }}"> {{ comment.author.displayName }}</a>
            <p>{{comment.comment}}</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}